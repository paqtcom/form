{"version":3,"file":"form.module.js","sources":["../src/form.js"],"sourcesContent":["import $ from 'jquery';\nimport Modernizr from 'modernizr';\n\n/**\n * Way2Web Form helpers.\n */\nclass W2Form {\n    /**\n     * Constructor.\n     *\n     * @param {object} keyOptions\n     */\n    constructor(keyOptions) {\n        this.version = '1.0.0';\n\n        this.defaultKeys = {\n            's':      'button.btn-primary[type=submit]',\n            'a':      'a.btn-default',\n            'Delete': 'button.btn-danger[type=submit]'\n        };\n        this.keys = {};\n        this.keyOptions = keyOptions;\n\n        this.modern = Modernizr.formattribute;\n    }\n\n\n    /**\n     * Helper functions for forms.\n     *\n     * @return {object}\n     */\n    init() {\n        this.keys = $.extend({}, this.defaultKeys, this.keyOptions || {});\n        $(document).on('keydown', this.keyPress.bind(this));\n\n        if (!this.modern) {\n            $('button[type=submit][form]').on('click', this.submit);\n            $('form input.form-control').on('keydown', this.submitOnEnter);\n        }\n\n        return this;\n    }\n\n    /**\n     * Set the modern variable, to simulate modern check.\n     *\n     * @param {boolean} customValue\n     *\n     * @return {object}\n     */\n    setModern(customValue) {\n        this.modern = customValue;\n\n        return this;\n    }\n\n    /**\n     * Get the modern variable.\n     *\n     * @return {boolean}\n     */\n    getModern() {\n        return this.modern;\n    }\n\n    /**\n     * Trigger the form when you click on the enter button.\n     *\n     * @param {object} event\n     */\n    submitOnEnter(event) {\n        if (event.key == 'Enter') {\n            $(this).closest('form').submit();\n        }\n    }\n\n    /**\n     * Trigger the form when you click on a button with the form attribute.\n     * The attribute form contains the id of the form.\n     *\n     * @param {object} event\n     */\n    submit(event) {\n        let button = $(this);\n        let buttonName = button.attr('name');\n        let buttonValue = button.val();\n        let formId = button.attr('form');\n        let form;\n\n        if (event) {\n            event.preventDefault();\n        }\n\n        if (!formId) {\n            return;\n        }\n\n        form = $('#' + formId);\n        if (buttonName && buttonValue) {\n            form.append('<input type=\"hidden\" name=\"' + buttonName + '\" value=\"' + buttonValue + '\">');\n        }\n\n        if (form.length > 0) {\n            form.submit();\n        }\n    }\n\n    /**\n     * Check if you press a key combination if there is a element to click.\n     *\n     * @param {object} event\n     */\n    keyPress(event) {\n        let key = this.keys[event.key];\n\n        if (event.ctrlKey && key && event.target.tagName != 'INPUT' && event.target.tagName != 'TEXTAREA') {\n            event.preventDefault();\n            this.click(key);\n        }\n    }\n\n    /**\n     * Click on an element.\n     *\n     * @param {string} key\n     */\n    click(key) {\n        if ($(key).length > 0) {\n            $(key)[0].click();\n        }\n    }\n}\n\nif (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = W2Form;\n}\n"],"names":["module","exports","keyOptions","this","version","defaultKeys","s","a","Delete","keys","modern","Modernizr","formattribute","init","$","extend","document","on","keyPress","bind","submit","submitOnEnter","setModern","customValue","getModern","event","key","closest","form","button","buttonName","attr","buttonValue","val","formId","preventDefault","append","length","ctrlKey","target","tagName","click"],"mappings":"+CAsIsB,iBAAXA,QAAiD,iBAAnBA,OAAOC,UAC5CD,OAAOC,mBA3HP,WAAYC,GACRC,KAAKC,QAAU,QAEfD,KAAKE,YAAc,CACfC,EAAU,kCACVC,EAAU,gBACVC,OAAU,kCAEdL,KAAKM,KAAO,GACZN,KAAKD,WAAaA,EAElBC,KAAKO,OAASC,EAAUC,yCAS5BC,KAAA,WASI,OARAV,KAAKM,KAAOK,EAAEC,OAAO,GAAIZ,KAAKE,YAAaF,KAAKD,YAAc,IAC9DY,EAAEE,UAAUC,GAAG,UAAWd,KAAKe,SAASC,KAAKhB,OAExCA,KAAKO,SACNI,EAAE,6BAA6BG,GAAG,QAASd,KAAKiB,QAChDN,EAAE,2BAA2BG,GAAG,UAAWd,KAAKkB,wBAaxDC,UAAA,SAAUC,GAGN,OAFApB,KAAKO,OAASa,UAUlBC,UAAA,WACI,YAAYd,UAQhBW,cAAA,SAAcI,GACO,SAAbA,EAAMC,KACNZ,EAAEX,MAAMwB,QAAQ,QAAQP,YAUhCA,OAAA,SAAOK,GACH,IAIIG,EAJAC,EAASf,EAAEX,MACX2B,EAAaD,EAAOE,KAAK,QACzBC,EAAcH,EAAOI,MACrBC,EAASL,EAAOE,KAAK,QAGrBN,GACAA,EAAMU,iBAGLD,IAILN,EAAOd,EAAE,IAAMoB,GACXJ,GAAcE,GACdJ,EAAKQ,OAAO,8BAAgCN,EAAa,YAAcE,EAAc,MAGrFJ,EAAKS,OAAS,GACdT,EAAKR,aASbF,SAAA,SAASO,GACL,IAAIC,EAAMvB,KAAKM,KAAKgB,EAAMC,KAEtBD,EAAMa,SAAWZ,GAA+B,SAAxBD,EAAMc,OAAOC,SAA8C,YAAxBf,EAAMc,OAAOC,UACxEf,EAAMU,iBACNhC,KAAKsC,MAAMf,OASnBe,MAAA,SAAMf,GACEZ,EAAEY,GAAKW,OAAS,GAChBvB,EAAEY,GAAK,GAAGe"}